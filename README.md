# HousingPet2021
Предсказание цен на недвижимость (квартиры) в Абакане

## Структура проекта
Репозиторий состоит из следующих трех ноутбуков (а также одного .py скрипта, в котором находятся функции и классы для третьего ноутбука), пронумерованных в порядке их реализации, в каждом из которых решается собственный набор задач:
1. Обработка и анализ добытых объявлений: форматирование данных, поиск опечаток, выбросов, построение визуализаций и проверка гипотез.
2. Работа с географическими составляющими: получение координат, поиск окружающих объявления объектов ифраструктуры, разделение адресов на районы по административно-территориальному делению и построение кластеризаций на основании географических признаков.
3. Построение моделей: обучение линейных регрессий, случайных лесов и бустингов, заполнение пропусков, отбор признаков, тюнинг гиперпараметрова, валидация и построение выводов на основании полученных результатов.

Если вдруг ноутбуки не рендерятся на гитхабе, посмотреть на них можно здесь: [первый](https://nbviewer.org/github/Lankymate/pet_housing/blob/main/housing_1_preprocessing.ipynb), [второй](https://nbviewer.org/github/Lankymate/pet_housing/blob/main/housing_2_geo.ipynb) и [третий](https://nbviewer.org/github/Lankymate/pet_housing/blob/main/housing_3_models.ipynb)

## О задаче
Рассматриваемую задачу не стоит воспринимать как предсказание **реальной**, то есть кадастровой или оцененной экспертом, цены квартир, поскольку стоимость квартиры, указанная в объявлении о ее продаже, зачастую не имеет ничего общего с фактической стоимостью недвижимости. Она, скорее, показывает ожидания агента, выставившего недвижимость на продажу, о ее стоимости в рамках доступной ему информации, то есть в каком-то роде тоже является прогнозом (нередко завышенным), зависящем от:
* Объективных характеристик квартиры;
* Субъективного восприятия агентом рынка недвижимости;
* Понимания им сложившейся экономической ситуации;
* И некоторых персональных предпочтений и причин, по которой квартира была выставлена на продажу. Кто-то захочет до последнего торговаться при заключении сделки за каждый шкаф, которой останется новым хозяевам, другие продают квартиры в новостройках из коммерческих соображений, а кому-то нужно побыстрее получить деньги/расстатьcя с жилплощадью и переехать в другой город и т.д., все это непосредственно влияет на цену в объявлении.

Здесь можно также поспорить о том, насколько объективна цена в объявлении для случаев, когда продажей занимается риэлторское агентство, но это подробно обсуждается в последней части проекта.

## Содержание ноутбуков
Каждый ноутбук имеет следующую структуру:
* Описание. Краткие тезисы о том, из чего состоит данный ноутбук, и какие средства применяются внутри него для решения поставленной проблемы.
* Библиотеки. Код в каждом ноутбуке написан на python 3.7, в этом пункте приведен импорт модулей, непосредственно используемых далее в коде.
* Данные. Импорт данных, с которыми будет осуществляться работа.
* Функции и классы. Код и описание часто использующихся функций и классов.
* Основная часть. Собственно, тело ноутбука, состояющее из блоков кода и текстовых описаний происходящего внутри них с подробным анализом выделенных задач и способов их решения.
* Результат. Экспорт файла, содержащего результаты проделанной работы и приготовленного для использования в следующем ноутбуке.
* Рассуждения и дополнения. Взгляд на произошедшее в основной части и дополнительные комментарии к процессу решения/идеи того, что можно было бы убрать, переделать или добавить в дальнейшем.

## Данные
(*ДИСКЛЕЙМЕР: абсолютно ВСЕ использованные данные (за исключением тех, что взяты из открытых источников) придуманы мною в бреду и не имеют никакого отношения к сбору реальной информации об объявлениях каким бы ни было образом из источников, размещенных где-то в интернете. Цены представляют собой случайную выборку из нормального распределения, описательные характеристики выдуманы, совпадения случайны.*)

Каждому ноутбуку подается на вход один *.csv* файл, полученный в предыдущем ноутбуке, и иногда дополнительные источники (все данные можно найти в папке **DATA**), результатом работы ноутбука является файл вида *data{номер ноутбука}.csv*.

## Ответы на некоторые вопросы
1. **Почему проект оформлен в jupyter-ноутбуках?** 

Я осведомлен о недостатках ноутбуков (и даже видел [этот](https://www.youtube.com/watch?v=7jiPeIFXb6U) доклад) и в целом согласен с тем, что переоформление кода хотя бы в виде скриптов порадовало бы многих людей, попадающих в этот репозиторий. 

Но мне бы очень не хотелось оформлять значительную часть текста в качестве описаний внутри кода или создавать отдельный большой блог-пост по всему проекту, а в ноутбуке удобно комментировать написанный код и рисовать графики, и мне зачастую хочется донести логику происходящего внутри блока и обсудить причину, по которой было принято решение сделать так, как есть (даже когда это решение кажется не слишком значительным в рамках всего проекта и в большом посте может выглядеть как неуместное техническое описание), или показать много графиков, подпитывая их какими-то рассуждениями.

2. **Почему Абакан?** 

Причин несколько, во-первых, по дефолтным городам, таким как: Москва, Питер, Новосибирск и прочие, таких исследований можно найти немало (я точно знаю несколько), это естественно не значит, что очередная работа по ним была бы унылой и бесполезной, можно как минимум попытаться улучшить результат или придумать и воплотить что-то новое, но мне захотелось попробовать реализовать проект для небольшого города. Если сделать качественно, то всегда можно сравнить результаты с работами, например, по Москве и объяснить полученную разницу, а в лучшем случае попытаться перенести полученный пайплайн и на данные для нескольких городов сразу. 

Во-вторых, с большим городом приходят и данные побольше, а я на текущий момент не обладаю вычислительными мощностями (в курсе про коллаб и ресурсы на каггле, но все равно не хочется зависеть от продолжительного времени обучения моделей/рисования графиков/обработки табличек и перекидывания результатов туда-обратно, а хочется побыстрее получать промежуточные итоги и побольше работать с ними), и идея перепроектировать некоторые вещи под оптимальные расчеты для данных побольше, если они когда-то появятся в этом проекте, в целом звучит неплохо. 

В-третьих, а почему бы и не Абакан? Это город где я вырос, и у меня присутствует интерес (некоммерческий) узнать о том, как здесь происходит процесс ценообразования недвижимости, опять же не подразумеваю, что аналогичный проект для Мск был бы не интересен, но у большого города всегда будут свои фишки, а здесь есть потенциальная возможность применить при анализе какие-то собственные знания о городе (что, к слову, помогло при работе с адресами и гео-данными в целом).

3. **Почему в качестве данных не был использован какой-нибудь публичный датасет, например, [Boston](https://www.kaggle.com/c/boston-housing) или [House prices](https://www.kaggle.com/c/house-prices-advanced-regression-techniques), или любой другой открытый датасет с каггла?**

Потому что добыча данных и работа с ними были полноценной частью данного проекта. Очень хотелось самостоятельно достать не слишком чистые данные своими руками и привести их к человеческому виду, с которым можно было бы работать дальше: так как собраны они были из двух разных источников, пришлось создать для них единый формат, почистить от опечаток, ошибок и выбросов, поработать с пропусками, прежде чем перейти к построению моделей.

4. **Тогда почему нет ноутбука с кодом того, как были получены эти данные?**

По объективным причинам выкладывать такой ноутбук в открытый доступ не очень хочется, но он тоже оформлен и готов к показу. На всякий случай, *весь код там выдуман и не применим ни для какого языка программирования, никогда не запускался, а если и был когда-то случайно запущен, то не работал, выдавал ошибки и всячески противостоял задуманному*.

## Контакты
Чтобы покритиковать проект и особенно код/предложить изменения или улучшения/указать на ошибки/задать любые интересующие вопросы, можно написать мне:
* В телеге: https://t.me/Lankymate
* В слаке: https://opendatascience.slack.com/team/U0285S8RL8Y
